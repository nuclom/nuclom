---
title: 'Authentication'
description: 'Authenticate with the Nuclom API using Better Auth'
icon: 'key'
---

Nuclom uses Better Auth for comprehensive authentication with support for email/password and OAuth providers.

## Authentication Flow

The authentication system supports multiple flows:

1. Email/password registration and login
2. OAuth providers (GitHub, Google)
3. Session-based authentication
4. Password reset functionality

## Endpoints

### Authentication Handler

All authentication endpoints are handled through the Better Auth handler.

```http
POST /api/auth/[...better-auth]
GET /api/auth/[...better-auth]
```

## Common Authentication Endpoints

### Sign Up with Email/Password

<CodeGroup>

```bash Request
curl -X POST "https://nuclom.com/api/auth/sign-up" \
  -H "Content-Type: application/json" \
  -d '{
    "email": "user@example.com",
    "password": "securepassword123",
    "name": "John Doe"
  }'
```

```json Response
{
  "success": true,
  "data": {
    "user": {
      "id": "user_12345",
      "email": "user@example.com",
      "name": "John Doe",
      "createdAt": "2024-01-01T00:00:00Z"
    },
    "session": {
      "sessionId": "session_67890",
      "expiresAt": "2024-01-08T00:00:00Z"
    }
  }
}
```

</CodeGroup>

### Sign In with Email/Password

<CodeGroup>

```bash Request
curl -X POST "https://nuclom.com/api/auth/sign-in" \
  -H "Content-Type: application/json" \
  -d '{
    "email": "user@example.com",
    "password": "securepassword123"
  }'
```

```json Response
{
  "success": true,
  "data": {
    "user": {
      "id": "user_12345",
      "email": "user@example.com",
      "name": "John Doe"
    },
    "session": {
      "sessionId": "session_67890",
      "expiresAt": "2024-01-08T00:00:00Z"
    }
  }
}
```

</CodeGroup>

### Sign Out

<CodeGroup>

```bash Request
curl -X POST "https://nuclom.com/api/auth/sign-out"
```

```json Response
{
  "success": true,
  "data": {
    "message": "Signed out successfully"
  }
}
```

</CodeGroup>

### Get Current Session

<CodeGroup>

```bash Request
curl -X GET "https://nuclom.com/api/auth/session"
```

```json Response
{
  "success": true,
  "data": {
    "user": {
      "id": "user_12345",
      "email": "user@example.com",
      "name": "John Doe",
      "avatarUrl": "https://example.com/avatar.jpg"
    },
    "session": {
      "sessionId": "session_67890",
      "expiresAt": "2024-01-08T00:00:00Z"
    }
  }
}
```

</CodeGroup>

## OAuth Authentication

### GitHub OAuth

```http
GET /api/auth/github
```

Redirects to GitHub OAuth authorization page.

**Callback URL:**
```
GET /api/auth/github/callback
```

### Google OAuth

```http
GET /api/auth/google
```

Redirects to Google OAuth authorization page.

**Callback URL:**
```
GET /api/auth/google/callback
```

## Password Reset

### Request Password Reset

<CodeGroup>

```bash Request
curl -X POST "https://nuclom.com/api/auth/reset-password" \
  -H "Content-Type: application/json" \
  -d '{
    "email": "user@example.com"
  }'
```

```json Response
{
  "success": true,
  "data": {
    "message": "Password reset email sent"
  }
}
```

</CodeGroup>

### Confirm Password Reset

<CodeGroup>

```bash Request
curl -X POST "https://nuclom.com/api/auth/reset-password/confirm" \
  -H "Content-Type: application/json" \
  -d '{
    "token": "reset_token_123",
    "password": "newpassword123"
  }'
```

```json Response
{
  "success": true,
  "data": {
    "message": "Password reset successfully"
  }
}
```

</CodeGroup>

## Session Management

### Session Configuration

| Setting | Value |
| ------- | ----- |
| **Session Duration** | 7 days |
| **Session Update** | Every 24 hours |
| **Session Storage** | Database-backed |
| **CSRF Protection** | Enabled |

### Session Cookies

Better Auth automatically manages session cookies:
- `better-auth.session_token`: Session identifier
- `better-auth.csrf_token`: CSRF protection token

## Error Responses

### Common Error Messages

| Error | Description |
| ----- | ----------- |
| `Invalid credentials` | Wrong email/password combination |
| `User not found` | Email not registered |
| `Email already exists` | Email already registered |
| `Invalid token` | Expired or invalid reset token |
| `Session expired` | Session has expired |
| `CSRF token mismatch` | CSRF validation failed |

## Authentication Middleware

For protecting routes that require authentication:

```typescript
import { auth } from "@/lib/auth";

export async function middleware(request: NextRequest) {
  const session = await auth.api.getSession({
    headers: request.headers
  });

  if (!session) {
    return new Response("Unauthorized", { status: 401 });
  }

  return NextResponse.next();
}
```

## Client-Side Authentication

### React Integration

```typescript
import { useSession } from "@/hooks/useSession";

function AuthenticatedComponent() {
  const { user, session, loading } = useSession();

  if (loading) return <div>Loading...</div>;
  if (!user) return <div>Please sign in</div>;

  return <div>Welcome, {user.name}!</div>;
}
```

### Sign In Form

```typescript
import { signIn } from "@/lib/auth-client";

async function handleSignIn(email: string, password: string) {
  try {
    const result = await signIn.email({
      email,
      password
    });

    if (result.success) {
      router.push("/dashboard");
    }
  } catch (error) {
    console.error("Sign in error:", error);
  }
}
```

## Environment Variables

Required environment variables for authentication:

```bash
# Better Auth
BETTER_AUTH_SECRET=your-secret-key-here

# OAuth Providers
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret

# Database
DATABASE_URL=postgresql://user:password@localhost:5432/nuclom
```

## Security Best Practices

<CardGroup cols={2}>
  <Card title="Environment Variables" icon="lock">
    Store sensitive credentials securely
  </Card>
  <Card title="HTTPS" icon="shield">
    Always use HTTPS in production
  </Card>
  <Card title="Session Security" icon="key">
    Configure secure session cookies
  </Card>
  <Card title="Rate Limiting" icon="gauge">
    Protect against brute force attacks
  </Card>
</CardGroup>
