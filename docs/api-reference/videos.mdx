---
title: 'Videos API'
description: 'Manage video content, uploads, transcripts, and AI processing'
icon: 'video'
---

The Videos API provides endpoints for managing video content, including CRUD operations, metadata management, comments, transcripts, and AI-powered processing.

<Note>
  For complete endpoint documentation including request/response schemas, see the [OpenAPI specification](/openapi.json) or the [Interactive API Reference](/docs/api/reference).
</Note>

## Overview

Videos are the core content type in Nuclom. Each video belongs to an organization and can optionally be organized into channels and series.

## Key Features

<CardGroup cols={2}>
  <Card title="Video Management" icon="film">
    Upload, update, and delete videos
  </Card>
  <Card title="AI Processing" icon="brain">
    Automatic transcription, summarization, and action item extraction
  </Card>
  <Card title="Progress Tracking" icon="chart-line">
    Track user viewing progress
  </Card>
  <Card title="Sharing" icon="share">
    Public/password-protected share links
  </Card>
  <Card title="Subtitles" icon="closed-captioning">
    Multi-language subtitle support
  </Card>
  <Card title="Knowledge Graph" icon="diagram-project">
    Decision tracking and organizational knowledge
  </Card>
</CardGroup>

## API Endpoints

### Video CRUD

| Endpoint | Description |
|----------|-------------|
| `GET /videos` | List videos with filtering and pagination |
| `POST /videos` | Create a new video |
| `GET /videos/{id}` | Get video details with comments |
| `PUT /videos/{id}` | Update video metadata |
| `DELETE /videos/{id}` | Soft-delete video (30-day retention) |
| `POST /videos/{id}/restore` | Restore soft-deleted video |

### Video Upload

| Endpoint | Description |
|----------|-------------|
| `POST /videos/upload` | Upload video file with metadata |
| `GET /videos/upload/presigned` | Get presigned URL for direct upload |
| `POST /videos/upload/confirm` | Confirm upload completion |

### Transcripts & Subtitles

| Endpoint | Description |
|----------|-------------|
| `GET /videos/{id}/transcript` | Get video transcript |
| `PUT /videos/{id}/transcript` | Update transcript segments |
| `GET /videos/{id}/subtitles` | List available subtitle languages |
| `GET /videos/{id}/subtitles/{lang}` | Get subtitle file (VTT/SRT) |

### Progress & Analytics

| Endpoint | Description |
|----------|-------------|
| `GET /videos/{id}/progress` | Get watch progress |
| `POST /videos/{id}/progress` | Update watch progress |
| `POST /videos/{id}/views` | Track video view |

## Data Models

### Video

```typescript
interface Video {
  id: string;              // UUID
  title: string;
  description?: string;
  duration: string;        // ISO 8601 duration or "HH:MM:SS"
  thumbnailUrl?: string;
  videoUrl?: string;
  authorId: string;
  organizationId: string;
  channelId?: string;
  collectionId?: string;
  transcript?: string;
  aiSummary?: string;
  viewCount: number;
  isPublic: boolean;
  isDeleted: boolean;
  deletedAt?: string;
  retentionUntil?: string;
  createdAt: string;
  updatedAt: string;
}
```

### Transcript Segment

```typescript
interface TranscriptSegment {
  startTime: number;       // Seconds
  endTime: number;
  text: string;
  confidence?: number;     // 0-1
}
```

## Video Processing Pipeline

When a video is uploaded, it goes through these processing stages:

<Steps>
  <Step title="Upload">
    Video file stored in R2
  </Step>
  <Step title="Thumbnail Generation">
    Extract preview thumbnails
  </Step>
  <Step title="Transcription">
    Audio-to-text using OpenAI Whisper
  </Step>
  <Step title="AI Analysis">
    Generate summary, action items, chapters
  </Step>
  <Step title="Embeddings">
    Generate vector embeddings for semantic search
  </Step>
</Steps>

Processing status can be tracked via the `processingStatus` field.

## Soft Delete & Retention

Videos are soft-deleted by default with a 30-day retention period:

<CodeGroup>

```bash Soft Delete (default)
DELETE /api/videos/{id}
```

```bash Permanent Delete
DELETE /api/videos/{id}?permanent=true
```

```bash Custom Retention
DELETE /api/videos/{id}?retentionDays=7
```

</CodeGroup>

<Tip>
  Soft-deleted videos can be restored during the retention period using the restore endpoint.
</Tip>

## Permissions

| Action | Required Permission |
|--------|---------------------|
| View video | Organization member |
| Create video | Organization member |
| Update video | Video author or organization owner |
| Delete video | Video author or organization owner |

## Error Codes

| Code | Description |
|------|-------------|
| `NOT_FOUND_VIDEO` | Video not found |
| `VIDEO_UNSUPPORTED_FORMAT` | Unsupported video format |
| `VIDEO_FILE_TOO_LARGE` | File exceeds size limit |
| `VIDEO_PROCESSING_FAILED` | Processing failed |

## Supported Formats

<Tabs>
  <Tab title="Video Formats">
    MP4, MOV, AVI, MKV, WebM
  </Tab>
  <Tab title="Subtitle Formats">
    VTT, SRT
  </Tab>
  <Tab title="Subtitle Languages">
    en, es, fr, de, pt, it, nl, pl, ru, ja, zh, ko, ar, tr, sv, da, fi, nb, el, cs, ro, hu, uk, id, vi, th
  </Tab>
</Tabs>

## Usage Examples

### List Videos

<CodeGroup>

```typescript Request
const response = await fetch("/api/videos?organizationId=org_123", {
  headers: { "Authorization": `Bearer ${token}` }
});
const { data } = await response.json();
```

```json Response
{
  "success": true,
  "data": {
    "items": [
      {
        "id": "video_abc123",
        "title": "Product Demo",
        "duration": "05:30",
        "thumbnailUrl": "https://..."
      }
    ],
    "pagination": {
      "page": 1,
      "limit": 20,
      "total": 42
    }
  }
}
```

</CodeGroup>

### Upload Video

<CodeGroup>

```typescript Request
const formData = new FormData();
formData.append("file", videoFile);
formData.append("title", "Meeting Recording");
formData.append("organizationId", "org_123");

await fetch("/api/videos/upload", {
  method: "POST",
  headers: { "Authorization": `Bearer ${token}` },
  body: formData
});
```

```json Response
{
  "success": true,
  "data": {
    "videoId": "video_123",
    "videoUrl": "https://storage.example.com/videos/...",
    "thumbnailUrl": "https://storage.example.com/thumbnails/...",
    "duration": "10:30",
    "processingStatus": "pending"
  }
}
```

</CodeGroup>
